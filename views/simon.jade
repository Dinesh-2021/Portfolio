//
   Created by Briana on 12/22/15.

//
   Created by Briana on 10/26/15.
doctype html
html
   head
      title= title
      link(rel='stylesheet', href='/stylesheets/simon.css')
      link(href='http://fonts.googleapis.com/css?family=VT323', rel='stylesheet', type='text/css')
      meta(name="viewport", content="width=device-width, initial-scale=1")
      link(rel='stylesheet', href='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js')
      link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css', integrity='sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==', crossorigin='anonymous')
      script(src="https://fb.me/react-0.13.3.js")
      script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js")
   block content
      body
        .container
           .row
              h1 Simon Game
           .row
              button Start
           .row
              .col-xs-6#red.color Red
              .col-xs-6#blue.color Blue
           .row
              .col-xs-6#yellow.color Yellow
              .col-xs-6#green.color Green
           .row
   script.
      //computer starts with empty pattern
      var compArr = [];

      //user starts with empty pattern
      var userArr = [];

      var gameLost = false;

      function randomizer(){
      //function returns a random number 1-4
         var random = Math.floor((Math.random() * (5 - 1)) + 1);
         compArr.push(random);
      };

      function compPlayer(num){
         if (num === 1){
            Red();
         } else if (num === 2){
            Blue();
         } else if (num === 3){
            Yellow();
         } else if (num === 4){
            Green();
         };
      }

      function Red(){
         //when called, this function will light up #red and play a designated sound
         var audio = new Audio('https://s3.amazonaws.com/freecodecamp/simonSound1.mp3');
         audio.play();

         $("#red").toggleClass("redActive");
         setTimeout(function(){
            $("#red").toggleClass("redActive");
         }, 1000);
      };

      function Blue(){
         //when called, this function will light up #blue and play a designated sound
         var audio = new Audio('https://s3.amazonaws.com/freecodecamp/simonSound2.mp3');
         audio.play();

         $("#blue").toggleClass("blueActive");
            setTimeout(function(){
            $("#blue").toggleClass("blueActive");
         }, 1000);
      };

      function Yellow(){
         //when called, this function will light up #yellow and play a designated sound
         var audio = new Audio('https://s3.amazonaws.com/freecodecamp/simonSound3.mp3');
         audio.play();

         $("#yellow").toggleClass("yellowActive");
         setTimeout(function(){
            $("#yellow").toggleClass("yellowActive");
         }, 1000);
      };

      function Green(){
         //when called, this function will light up #green and play a designated sound
         var audio = new Audio('https://s3.amazonaws.com/freecodecamp/simonSound4.mp3');
         audio.play();
         $("#green").toggleClass("greenActive");
         setTimeout(function(){
            $("#green").toggleClass("greenActive");
         }, 1000);
      };

      function sequencePlayer(){
         randomizer();
         var i = 1;
         compArr.forEach(function(entry){
            setTimeout(function(){
               compPlayer(entry);
            }, (1000 * i));
            i += 1;
         });
         userArr = [];
      };

      function redClick(){
         //color function will initiate
         Red();
         //that color's number will be added to userArr
         userArr.push(1);
      };

      function blueClick(){
         //color function will initiate
         Blue();
         //that color's number will be added to userArr
         userArr.push(2);
      };

      function yellowClick(){
         //color function will initiate
         Yellow();
         //that color's number will be added to userArr
         userArr.push(3);
      };

      function greenClick(){
         //color function will initiate
         Green();
         //that color's number will be added to userArr
         userArr.push(4);
      };

      function compare(){
         if (compArr.length === userArr.length){
            for (var j = 0; j<compArr.length; j++){
               if (compArr[j] !== userArr[j]) {
                  alert("You lost. Try again! Or don't.");
                  gameLost = true;
                  userArr = [];
                  compArr = [];
               };
            };
            if (!gameLost){
               sequencePlayer();
            };
         };
      };

      $(document).ready(function(){
         $("button").click(function(){
            sequencePlayer();
            console.log(compArr);
            console.log(userArr);
         });

         $("#red").click(function(){
            redClick();
            compare();
         });

         $("#blue").click(function(){
            blueClick();
            compare();
         });

         $("#yellow").click(function(){
            yellowClick();
            compare();
         });

         $("#green").click(function(){
            greenClick();
            compare();
         });

      });


      //computer starts with empty pattern - done
      //randomizer function returns a random number 1-4 - done
      //each color has a function to light up and make a sound - done
         //computer randomizes pattern - function will return random number 1-4 - done
         //computer plays pattern - initiate sound/light pattern of color - done
         //user mimics pattern - each click initates sound/light function and stores into new array - done
         //computer stores user's pattern - done
         //computer compares user & computer pattern - done
      //if they match - done
         //computer adds to pattern - done
         //computer plays pattern - done
         //user mimcs pattern
         //computer stores user's pattern
         //computer compares user & computer pattern
      //if they don't
         //computer sends error message